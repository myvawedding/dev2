"use strict";!function(o){DRTS.WordPress=DRTS.WordPress||{},DRTS.WordPress.mediamanager=DRTS.WordPress.mediamanager||function(e){var l=o.extend({},{selector:"",maxNumFiles:0,maxNumFileExceededError:"",fileNotAllowedError:"",sortable:!0},e),t=o(l.selector);if(t.length){var n={},s=t.closest(".drts-form-type-wp-media-manager").find(".drts-wp-upload-current table");t.on("click",function(e){e.preventDefault();var a,t=o(this),d=t.data("input-name");n[d]||(a=t.data("mime-types").split(","),n[d]=wp.media({frame:"post",multiple:!0,library:{type:a}}),n[d].on("insert",function(e){var t,i,r;n[d].state().get("selection").each(function(e){if(t=e.toJSON(),-1===o.inArray(t.mime,a))return alert(l.fileNotAllowedError),!1;r=void 0!==t.sizes?void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url:t.icon,i='<tr class="drts-wp-file-row"><td><input name="'+d+"[current]["+t.id+'][check][]" type="checkbox" value="'+t.id+'" checked="checked"></td><td><img src="'+r+'" alt="'+t.title+'" /></td><td>'+t.title+"</td><td>"+t.filesizeHumanReadable+"</td></tr>",s.has(".drts-wp-file-row").length?o(i).appendTo(s.find("tbody")).effect("highlight",{},2e3):s.find("tbody").html(i).effect("highlight",{},2e3)})})),n[d].open()}),t.closest("form").submit(function(){if(l.maxNumFiles&&s.find('input[type="checkbox"]:checked').length>l.maxNumFiles)return l.maxNumFileExceededError&&alert(l.maxNumFileExceededError),o(this).find("button[type=submit]").prop("disabled",!1),!1}),l.sortable&&s.find("tbody").sortable({containment:"parent",axis:"y"})}}}(jQuery);