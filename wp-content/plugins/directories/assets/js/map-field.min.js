"use strict";var _createClass=function(){function i(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,e,t){return e&&i(a.prototype,e),t&&i(a,t),a}}();function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}!function(l){DRTS.Map.field=function(){function n(a){var i=this;_classCallCheck(this,n),this.field=l(a),this.map=DRTS.Map.api.getMap(a,{infobox:!1,default_zoom:this.field.data("zoom"),default_location:{lat:this.field.data("center-lat"),lng:this.field.data("center-lng")},scrollwheel:1===parseInt(this.field.data("scrollwheel"))});var e=this.field.data("lat"),t=this.field.data("lng");e&&t&&this.setMarker([e,t]),this.map.getContainer().on("map_clicked.sabai",function(a,e){i._onMapClicked(e.latlng)}).on("map_zoom_changed.sabai",function(a,e){i._onMapZoomChanged(e.zoom)}),this.field.on("change",".drts-map-field-lat, .drts-map-field-lng",function(a){var e=i.field.find(".drts-map-field-lat").val(),t=i.field.find(".drts-map-field-lng").val();e&&t&&i._onLatLngFieldModified([e,t])}),this.map.draw()}return _createClass(n,[{key:"_onMapClicked",value:function(a){return this.setMarker(a).updateFields(a),this.map.draw({zoom:this.map.getZoom()}),this}},{key:"_onMapZoomChanged",value:function(a){return this.field.find(".drts-map-field-zoom").val(a),this}},{key:"_onLatLngFieldModified",value:function(a){return this.setMarker(a).updateFields(a),this.map.draw({zoom:this.map.getZoom()}),this}},{key:"updateFields",value:function(a,e){return void 0===e&&(e=this.map.getZoom()),this.field.find(".drts-map-field-zoom").val(e).end().find(".drts-map-field-lat").val(a[0]).end().find(".drts-map-field-lng").val(a[1]),this}},{key:"setMarker",value:function(a){return this.map.clearMarkers().addMarker({lat:a[0],lng:a[1],index:0}).getContainer().find(".drts-map-map").fitMaps(),this}}]),n}()}(jQuery);