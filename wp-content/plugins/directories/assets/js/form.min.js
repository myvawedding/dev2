"use strict";!function(l){DRTS.Form={field:{}},DRTS.Form.form=function(e){var r,t=l(e);if(t.length)return(r=t.closest("."+DRTS.bsPrefix+"modal").length?l("#drts-modal"):t).find("button[type=submit]:not(:disabled)").click(function(e){var r=l(this);t.find("[data-clear-placeholder]").each(function(){var e=l(this);e.data("clear-placeholder")&&e.val()==e.attr("placeholder")&&e.val("")}),t.append(l("<input>",{type:"hidden",name:r.attr("name"),value:r.val()})),r.closest("."+DRTS.bsPrefix+"modal-footer").length&&t.submit()}).end().submit(function(){r.find("button[type=submit]").prop("disabled",!0)}),t},DRTS.Form.ajaxForm=function(e,n,o,s){var d=l(e);if(d.length)return(d.closest("."+DRTS.bsPrefix+"modal").length?l("#drts-modal"):d).find("button[type=submit]:not(:disabled)").click(function(e){var r=l(this),t=!1;if(d.find("input[type^=file]").each(function(){if(l(this).attr("value"))return!(t=!0)}),t)return!0;if(d.find("[data-clear-placeholder]").each(function(){var e=l(this);e.data("clear-placeholder")&&e.val()==e.attr("placeholder")&&e.val("")}),d.append(l("<input>",{type:"hidden",name:r.attr("name"),value:r.val()})),r.hasClass("drts-form-back-btn-no-ajax"))return!0;e.preventDefault(),d.trigger("form_ajax_submit.sabai");var a={trigger:r,type:d.attr("method"),container:n,target:s.target||"",url:o,data:d.serialize(),scroll:!1,onSuccess:s.onSuccess||null,onError:function(e,r,t,a){DRTS.Form.handleError(d,e,r,t,a,s)},onContent:s.onContent||null,onReadyState:s.onReadyState||null,onSuccessFlash:s.onSuccessFlash||!1,onSuccessRedirect:s.onSuccessRedirect||!1,onErrorFlash:!1,onErrorRedirect:s.onErrorRedirect||!1,loadingImage:s.loadingImage||!1,modalHideOnSend:s.modalHideOnSend||!1,modalHideOnSuccess:s.modalHideOnSuccess||!1};s.onSubmit&&s.onSubmit(d,r,a),DRTS.ajax(a)}).end().submit(function(){d.find("button[type=submit]").prop("disabled",!0)}),d},DRTS.Form.handleError=function(e,r,t,a,n,o){o=l.extend({},o),422===n?(DRTS.Form.handle422Error(e,r),o.scroll&&DRTS.scrollTo(e,1e3)):(o.onError&&o.onError(r,t,a,n),r.messages.length&&DRTS.Form.addFormErrorHeaders(e,r.messages))},DRTS.Form.addFormErrorHeaders=function(e,r){var t=e.prev(".drts-form-headers");if(t.length){t.text("");for(var a=0;a<r.length;a++)t.append(l('<div class="'+DRTS.bsPrefix+"alert "+DRTS.bsPrefix+'alert-danger"></div>').text(r[a]))}},DRTS.Form.handle422Error=function(n,e){var o=e.messages||[];l.each(e.errors,function(e,r){if(""!==e){var t=n.find('[name="'+e+'"]');if(t.length||(t=n.find('[data-form-field-name="'+e+'"]')),t.length){var a=t.closest(".drts-form-field");a.length&&(a.addClass("drts-form-has-error").find(".drts-form-error").text(r),a.hasClass("drts-form-states-invisible")&&a.removeClass("drts-form-states-invisible").show())}}else o.push(r)}),o.length&&DRTS.Form.addFormErrorHeaders(n,o)}}(jQuery);