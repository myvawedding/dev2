"use strict";!function(i){DRTS.Form.field.datepicker=function(t){var n,d,a,e,s,r;(n=i(t)).length&&(d=n.find(".drts-form-datepicker-date")).length&&(n.find(".flatpickr-input").each(function(){var t=i(this);"text"===t.attr("type")?t.remove():t.attr("type","text")}),a=d.closest(".drts-form-flatpickr").find(".drts-clear"),s=d.data("date-mode")||"single",r=d.data("date-enable-time")?"Y/m/d H:i":"Y/m/d",e={altFormat:d.data("date-display-format")||r,altInput:!0,dateFormat:r,minDate:d.data("date-min")||null,maxDate:d.data("date-max")||null,enableTime:!!d.data("date-enable-time"),time_24hr:!0,defaultDate:d.data("date-default-date")||null,locale:d.data("date-locale")||null,mode:s,static:!!d.data("date-static"),onValueUpdate:function(){a.length&&a.css("visibility",0<d.val().length?"visible":"hidden")},onReady:function(){a.length&&a.css("visibility",0<d.val().length?"visible":"hidden")},onChange:function(t,a,e){var i,l=!1;switch(s){case"range":2===t.length&&(d.val(e.formatDate(t[0],r)+" to "+e.formatDate(t[1],r)),l=!0);break;case"single":d.data("alt-value",e.parseDate(a,r).getTime()/1e3),l=!0}l&&!n.closest("."+DRTS.bsPrefix+"modal").length&&(0<(i=d.closest("form")).length&&i.hasClass("drts-view-filter-form")&&i.submit())}},d.get(0)._flatpickr&&d.get(0)._flatpickr.destroy(),d.flatpickr(e),n.off("click.sabai").on("click.sabai",".drts-clear",function(){i(this).css("visibility","hidden").closest(".drts-form-flatpickr").find(".flatpickr-input").val("").closest("form").trigger("change.sabai")}),n.off("entity_reset_form_field.sabai").on("entity_reset_form_field.sabai",function(){i(this).find(".flatpickr-input").val("")}))},i(DRTS).on("clonefield.sabai",function(t,a){a.clone.hasClass("drts-form-type-datepicker")&&DRTS.Form.field.datepicker(a.clone)})}(jQuery);