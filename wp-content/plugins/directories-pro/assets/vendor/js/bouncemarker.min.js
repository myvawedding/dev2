!function(){var n=L.Marker.prototype.onAdd,o=L.Marker.prototype.onRemove;L.Marker.mergeOptions({bounceOnAdd:!1,bounceOnAddOptions:{duration:1e3,height:-1},bounceOnAddCallback:function(){}}),L.Marker.include({_toPoint:function(t){return this._map.latLngToContainerPoint(t)},_toLatLng:function(t){return this._map.containerPointToLatLng(t)},_motionStep:function(t,n){var o=this,i=(new Date-n.start)/n.duration;1<i&&(i=1);var e=o._easeOutBounce(i);n.step(e),1!==i?L.Util.requestAnimFrame(function(t){o._motionStep(t,n)}):n.end()},_bounceMotion:function(n,o){var i=L.latLng(this._origLatlng),e=this._dropPoint.y,s=this._dropPoint.x,r=this._point.y-e,a=this;L.Util.requestAnimFrame(function(t){a._motionStep(t,{delay:10,duration:n||1e3,start:new Date,step:function(t){a._dropPoint.y=e+r*t-(a._map.project(a._map.getCenter()).y-a._origMapCenter.y),a._dropPoint.x=s-(a._map.project(a._map.getCenter()).x-a._origMapCenter.x),a.setLatLng(a._toLatLng(a._dropPoint))},end:function(){a.setLatLng(i),"function"==typeof o&&o()}})})},_easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounce:function(t,n){this._origLatlng=this.getLatLng(),this._bounce(t,n)},_bounce:function(t,n){"function"==typeof t&&(n=t,t=null),"number"==typeof(t=t||{duration:1e3,height:-1})&&((t.duration=t).height=n),this._origMapCenter=this._map.project(this._map.getCenter()),this._dropPoint=this._getDropPoint(t.height),this._bounceMotion(t.duration,n)},_getDropPoint:function(t){var n;return this._point=this._toPoint(this._origLatlng),n=void 0===t||t<0?this._toPoint(this._map.getBounds()._northEast).y:this._point.y-t,new L.Point(this._point.x,n)},onAdd:function(t){this._map=t,this._origLatlng=this._latlng,!0===this.options.bounceOnAdd&&(void 0!==this.options.bounceOnAddDuration&&(this.options.bounceOnAddOptions.duration=this.options.bounceOnAddDuration),void 0!==this.options.bounceOnAddHeight&&(this.options.bounceOnAddOptions.height=this.options.bounceOnAddHeight),this._dropPoint=this._getDropPoint(this.options.bounceOnAddOptions.height),this.setLatLng(this._toLatLng(this._dropPoint))),n.call(this,t),!0===this.options.bounceOnAdd&&this._bounce(this.options.bounceOnAddOptions,this.options.bounceOnAddCallback)},onRemove:function(t){clearInterval(this._intervalId),o.call(this,t)}})}();